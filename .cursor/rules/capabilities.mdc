---
description: Discoverable capabilities for the repo's AI assistant
alwaysApply: true
lastReviewed: 2025-10-23
healthScore:
  content: green # Accurate capability descriptions
  usability: green # Clear list format, easy to scan
  maintenance: green # Recently reviewed, current features
---

## What you can ask the assistant to do

### Rules management

- Create new project rules (Always / Auto Attached / Agent Requested / Manual)
- Update existing rules with proper metadata and globs
- Validate rules (required front matter, healthScore, lastReviewed)
- Validate rules (required front matter, healthScore, lastReviewed; stale/refs checks; autofix)
- Suggest rule structure, scope, and examples

### Validation and automation

- Run `[.cursor/scripts/rules-validate.sh](.cursor/scripts/rules-validate.sh)` to check metadata
  - Flags: `--format json|text`, `--fail-on-missing-refs`, `--fail-on-stale`, `--autofix`, `--report`, `--report-out <path>`
- List rules and their metadata via `[.cursor/scripts/rules-list.sh](.cursor/scripts/rules-list.sh)`
- Validate rule attachments: `[.cursor/scripts/rules-attach-validate.sh](.cursor/scripts/rules-attach-validate.sh)`
- Validate ERD structure: `[.cursor/scripts/erd-validate.sh](.cursor/scripts/erd-validate.sh) <path>`
- Check capabilities sync: `[.cursor/scripts/capabilities-sync.sh](.cursor/scripts/capabilities-sync.sh) [--check|--update]`
- Deep validation and maintenance: `[.cursor/scripts/deep-rule-and-command-validate.sh](.cursor/scripts/deep-rule-and-command-validate.sh)`
  - Orchestrates multiple validators (rules, capabilities, shellcheck, help/error format, test colocation)
  - Performs cross-validation (rules → scripts, scripts → capabilities)
  - Calculates health scores by category (rules, scripts, docs, tests)
  - Flags: `--fix` (auto-repair), `--report` (JSON output), `--score-only`, `--fail-threshold N`

### Engineering docs & planning

- Main rules (catalog):

  - `spec-driven.mdc`
  - `create-erd.mdc`
  - `generate-tasks-from-erd.mdc`
  - `project-lifecycle.mdc`
  - `testing.mdc`
  - `intent-routing.mdc`
  - `tdd-first.mdc`
  - `assistant-behavior.mdc`
  - `direct-answers.mdc`
  - `code-style.mdc`
  - `shell-unix-philosophy.mdc`
  - `refactoring.mdc`
  - `front-matter.mdc`
  - `rule-creation.mdc`
  - `rule-maintenance.mdc`
  - `rule-quality.mdc`
  - `capabilities.mdc`
  - `workspace-security.mdc`
  - `security.mdc`
  - `github-config-only.mdc`
  - `imports.mdc`

- Quick references (optional, when helpful):
  - `assistant-git-usage.caps.mdc`, `github-api-usage.caps.mdc`, `commands.caps.mdc`, `intent-routing.caps.mdc`, `tdd-first.caps.mdc`, `create-erd.caps.mdc`, `generate-tasks-from-erd.caps.mdc`, `project-lifecycle.caps.mdc`, `testing.caps.mdc`, optionally `direct-answers.caps.mdc`, `workspace-security.caps.mdc`.

### Git assistance

- Generate Conventional Commits via CLI: `[.cursor/scripts/git-commit.sh](.cursor/scripts/git-commit.sh) --type ... --description ...` (supports bodies, footers, breaking changes). See `assistant-git-usage.mdc`.
- Suggest branch names with validated types: `[.cursor/scripts/git-branch-name.sh](.cursor/scripts/git-branch-name.sh) --task ... [--type ...] [--feature ...] [--apply]`. See `assistant-git-usage.mdc`.
- Run commit gates locally when requested: use your repo's test/lint/typecheck scripts as configured.
- Create pull requests via shell (curl + GitHub API): `[.cursor/scripts/pr-create.sh](.cursor/scripts/pr-create.sh) --title "..." [--body "..."] [--base <branch>] [--head <branch>]`.
- Update pull requests: `[.cursor/scripts/pr-update.sh](.cursor/scripts/pr-update.sh) --pr <number>|--head <branch> [--title "..."] [--body "..."]`.
- Check PR status: `[.cursor/scripts/checks-status.sh](.cursor/scripts/checks-status.sh) --pr <number> [--wait] [--timeout <seconds>]`.
- Dispatch changesets auto-merge: `[.cursor/scripts/changesets-automerge-dispatch.sh](.cursor/scripts/changesets-automerge-dispatch.sh) --pr <number>`.

### Intent routing & user intent

- Explain and apply routing per `intent-routing.mdc` and `user-intent.mdc` (triggers, signals, consent-after-plan, minimal rule attachment).
- Enforce the JS/TS pre-edit TDD gate and scope-check protocol when implementation intent is detected.

### Loop/Deadlock safeguards

- Apply one-shot consent rules for verification/tool use (`assistant-behavior.mdc`).
- Apply one-shot consent when a new owner spec must be created (`tdd-first.mdc`).
- Pause when ambiguity persists after one clarifying question (`intent-routing.mdc`).
- Add or refine mitigations in `rule-maintenance.mdc` under “Looping/Deadlock Mitigations”.

- Read-only consent exception: execute obvious, safe read-only commands without an extra prompt; announce the exact command before running.
- High-certainty suggestions: propose adding similar read-only commands to the session allowlist with a one-line confirmation when intent is clear.

### Rules automation

- Generate/normalize rule front matter: use your local script if present.
- (See also: `.cursor/scripts/rules-list.sh`, `.cursor/scripts/rules-validate.sh`).

### Discovery (rules, MCP, local scripts)

- Ask: `@capabilities` or “What can you do?”
- Output: grouped bullets by source (rules|mcp|local), truncated with “N more…” when long
- Safety: read-only listing; never echo secrets; execution remains consent-gated
- Sources:
  - Rules: scan `.cursor/rules/*.mdc` for names/descriptions
  - MCP: list configured servers/tools/resources and auth state
  - Local: scan `.cursor/scripts/**/*.sh` top comments for descriptions

### Testing & TDD

- Author or adjust Jest specs following `testing.mdc` (structure, naming, quality).
- Enforce TDD cycle: add failing spec → implement minimal change → run focused tests (`yarn test path -t "name"`) → refactor. See `tdd-first.mdc`.
- Check TDD scope for a file: `[.cursor/scripts/tdd-scope-check.sh](.cursor/scripts/tdd-scope-check.sh) <file>` (exit 0 = TDD required, exit 1 = exempt).
- Migrate tests to colocation: `[.cursor/scripts/test-colocation-migrate.sh](.cursor/scripts/test-colocation-migrate.sh)`.
- Validate test colocation: `[.cursor/scripts/test-colocation-validate.sh](.cursor/scripts/test-colocation-validate.sh)`.

### Shell Scripts & Unix Philosophy

- Enforce Unix Philosophy principles for shell scripts (see `shell-unix-philosophy.mdc`):
  - Single responsibility (do one thing well)
  - Size targets: < 150 lines (warn at 200, fail at 300)
  - Flag limits: ≤ 6-8 flags (warn at 10+)
  - Composition: results → stdout, logs → stderr
  - Policy/mechanism separation
- Validate shell scripts: `[.cursor/scripts/help-validate.sh](.cursor/scripts/help-validate.sh)`, `[.cursor/scripts/error-validate.sh](.cursor/scripts/error-validate.sh)`, `[.cursor/scripts/network-guard.sh](.cursor/scripts/network-guard.sh)`
- Run ShellCheck: `[.cursor/scripts/shellcheck-run.sh](.cursor/scripts/shellcheck-run.sh)`
- Propose splits when scripts exceed thresholds (e.g., > 200 lines, 10+ flags, multiple responsibilities)

### Imports & formatting

- Organize imports per `imports.mdc` (grouping, alphabetization, type-only imports) and keep modules side-effect free by default.

### Security & workspace policy

- Audit Cursor workspace trust and autoruns: check `.vscode/tasks.json` for `runOn: "folderOpen"`, advise removal; prefer manual runs. See `workspace-security.mdc`.
- Run security scan: `yarn security:scan`.

### Project lifecycle & archival

- Generate final summaries: `[.cursor/scripts/final-summary-generate.sh](.cursor/scripts/final-summary-generate.sh) --project <slug> --year <YYYY> [--force] [--pre-move]`.
- Archive projects (full workflow): `[.cursor/scripts/project-archive-workflow.sh](.cursor/scripts/project-archive-workflow.sh) --project <slug> --year <YYYY> [--dry-run]`.
- Archive single project: `[.cursor/scripts/project-archive.sh](.cursor/scripts/project-archive.sh) --project <slug> --year <YYYY>`.
- Backfill lifecycle artifacts: `[.cursor/scripts/project-lifecycle-migrate.sh](.cursor/scripts/project-lifecycle-migrate.sh) --project <slug>`.
- Validate project lifecycle: `[.cursor/scripts/project-lifecycle-validate.sh](.cursor/scripts/project-lifecycle-validate.sh)`.
- Validate scoped project: `[.cursor/scripts/project-lifecycle-validate-scoped.sh](.cursor/scripts/project-lifecycle-validate-scoped.sh) <slug>`.
- Validate all completed projects: `[.cursor/scripts/project-lifecycle-validate-sweep.sh](.cursor/scripts/project-lifecycle-validate-sweep.sh)`.
- Validate artifacts: `[.cursor/scripts/validate-artifacts.sh](.cursor/scripts/validate-artifacts.sh) [--erd-path <path>] [--tasks-path <path>]`.
- Template filling: `[.cursor/scripts/template-fill.sh](.cursor/scripts/template-fill.sh) --template <name> --var KEY=VALUE...`.

### CI/tooling assistance

- Lint GitHub workflows: `[.cursor/scripts/lint-workflows.sh](.cursor/scripts/lint-workflows.sh)`.
- Run security scan: `[.cursor/scripts/security-scan.sh](.cursor/scripts/security-scan.sh)`.
- Run config preflight checks: `[.cursor/scripts/preflight.sh](.cursor/scripts/preflight.sh)`.
- Check broken links: `[.cursor/scripts/links-check.sh](.cursor/scripts/links-check.sh) [--path <dir>]`.
- Tooling inventory: `[.cursor/scripts/tooling-inventory.sh](.cursor/scripts/tooling-inventory.sh)`.

### Validation gates & helpers

- Validate PR titles locally: use local commit message policy via `.cursor/scripts/git-commit.sh`.
- Enforce spec-diff in CI if configured.
- Run related tests pre-commit: use your repo's test runner configuration.
- Validate branch name pre-push: via hooks guided by `.cursor/scripts/git-branch-name.sh`.

### How to invoke

- Reference this rule: `@capabilities`
- Ask directly in chat: “What can you do here?” or “List available tasks.”

### Script libraries & helpers

- Shared library: `[.cursor/scripts/.lib.sh](.cursor/scripts/.lib.sh)` — Common helpers sourced by other scripts
- Test/validation helpers:
  - `[.cursor/scripts/rules-validate.spec.sh](.cursor/scripts/rules-validate.spec.sh)` — Spec helper for rules validation tests
  - `[.cursor/scripts/validate-artifacts-smoke.sh](.cursor/scripts/validate-artifacts-smoke.sh)` — Smoke test for artifact validation
  - `[.cursor/scripts/validate-project-lifecycle.sh](.cursor/scripts/validate-project-lifecycle.sh)` — Project lifecycle validation helper

### Adding new capabilities

- Add new sections here describing new tasks as they're implemented
- Keep entries short and action-oriented
- Run `capabilities-sync.sh --check` to ensure all scripts are documented

### Platform reference

- For Cursor platform features and constraints, see `@cursor-platform-capabilities`.
